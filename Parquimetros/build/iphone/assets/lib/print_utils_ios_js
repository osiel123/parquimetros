function isConnected(){return session?!0:!1}var ExternalAccessories=require("com.logicallabs.externalaccessories"),PROTOCOL_STRING="com.zebra.rawport",session;exports.getDeviceList=function(){var e,t;return e=[],t=ExternalAccessories.connectedAccessories,t.forEach(function(t){t.protocolStrings.indexOf(PROTOCOL_STRING)>-1&&e.push({name:t.name,device:t})}),e},exports.connect=function(e){session&&session.close(),session=e.openSession({protocol:PROTOCOL_STRING}),session?Ti.App.fireEvent("printerConnected"):Ti.App.fireEvent("printerError",{message:L("could_not_create_session")})},exports.isConnected=isConnected,exports.disconnect=function(){session&&(session.close(),session=null,Ti.App.fireEvent("printerDisconnected"))},ExternalAccessories.addEventListener("accessoryDisconnected",function(e){Ti.API.info("accessoryDisconnected event received"),session&&session.accessory.equals(e.accessory)&&(session=null,Ti.App.fireEvent("printerDisconnected"))}),exports.print=function(e){Ti.API.info("print lib function isConnected - "+isConnected());var t=262144,i=Ti.createBuffer({length:t,value:e});isConnected()?(session.write({data:i}),i.clear()):alert(L("session_not_open"))};