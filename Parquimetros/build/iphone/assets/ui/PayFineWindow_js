function PayFineWindow(e){function t(){return-1==textFieldPaymentType.selectedId?(showMessage(L("select_payment_type")),textFieldPaymentType.focus(),!1):0==textFieldName.value.trim().length?(showMessage(L("enter_name")),textFieldName.focus(),!1):textFieldRFC.value.trim().length>0&&!validateRFC(textFieldRFC.value)?(showMessage(L("valid_rfc")),textFieldRFC.focus(),!1):textFieldEmail.value.trim().length>0&&!validateEmail(textFieldEmail.value)?(showMessage(L("valid_email")),textFieldEmail.focus(),!1):textFieldPhone.value.trim().length>0&&!isInt(textFieldPhone.value)?(showMessage(L("valid_phone")),textFieldPhone.focus(),!1):textFieldZip.value.trim().length>0&&!isInt(textFieldZip.value)?(showMessage(L("valid_zip")),textZip.focus(),!1):!0}function i(e){e?(indicatorMakePayment.show(),buttonMakePayment.visible=!1):(indicatorMakePayment.hide(),buttonMakePayment.visible=!0)}var o=require("/lib/network"),n=!1;return"android"==Ti.Platform.name&&(n=!0),windowPayFine=Ti.UI.createWindow({backgroundColor:Ti.App.backgroundColor,width:Ti.UI.FILL,height:Ti.UI.FILL,layout:"vertical"}),"android"==Ti.Platform.name&&(windowPayFine.windowSoftInputMode=Titanium.UI.Android.SOFT_INPUT_STATE_HIDDEN),viewBarPayFine=Titanium.UI.createView({backgroundColor:Ti.App.appColor,width:Ti.UI.FILL,layout:"horizontal",height:"60dp",top:0}),viewBackPayFine=Ti.UI.createView({backgroundColor:"transparent",width:"60dp",height:"100%",left:0}),imageViewBackIcon=Ti.UI.createImageView({bubbleParent:!0,image:"/images/back_icon.png",height:"40dp",width:"40dp",bottom:"5dp"}),labePayFineTitle=Ti.UI.createLabel({text:L("make_payment"),font:{fontSize:Ti.App.titleFontSizeBig},color:Ti.App.labelTitleColor,bottom:"8dp",left:"5dp"}),scrollViewPayFineContainer=Ti.UI.createScrollView({width:Ti.UI.FILL,height:Ti.UI.FILL,layout:"vertical"}),labelPaymentType=Ti.UI.createLabel({text:L("payment_type"),top:"20dp",width:"90%",font:{fontSize:Ti.App.fontSize},color:Ti.App.labelSubColor}),pickerPaymentType=Ti.UI.createPicker({selectionIndicator:!0,borderColor:Ti.App.textFieldBorderColor,borderRadius:4,width:"90%",font:{fontSize:Ti.App.fontSize}}),"android"==Ti.Platform.osname?pickerPaymentType.height="50dp":pickerPaymentType.height="150dp",viewPaymentType=Ti.UI.createView({height:Ti.UI.SIZE,width:Ti.UI.FILL}),textFieldPaymentType=Ti.UI.createTextField({enabled:n,selectedId:-1,value:"",hintText:L("please_select"),backgroundColor:Ti.App.textFieldBackgroundColor,borderColor:Ti.App.textFieldBorderColor,borderRadius:4,paddingLeft:10,height:"50dp",width:"90%",font:{fontSize:Ti.App.fontSize}}),labelName=Ti.UI.createLabel({text:L("name"),top:"3dp",width:"90%",font:{fontSize:Ti.App.fontSize},color:Ti.App.labelSubColor}),textFieldName=Ti.UI.createTextField({value:"",hintText:L("mandatory"),backgroundColor:Ti.App.textFieldBackgroundColor,borderColor:Ti.App.textFieldBorderColor,borderRadius:4,paddingLeft:10,height:"50dp",width:"90%",font:{fontSize:Ti.App.fontSize},autocapitalization:Ti.UI.TEXT_AUTOCAPITALIZATION_WORDS}),labelRFC=Ti.UI.createLabel({text:L("rfc"),top:"3dp",width:"90%",font:{fontSize:Ti.App.fontSize},color:Ti.App.labelSubColor}),textFieldRFC=Ti.UI.createTextField({value:"",hintText:L("optional"),backgroundColor:Ti.App.textFieldBackgroundColor,borderColor:Ti.App.textFieldBorderColor,borderRadius:4,paddingLeft:10,height:"50dp",width:"90%",font:{fontSize:Ti.App.fontSize},autocapitalization:Ti.UI.TEXT_AUTOCAPITALIZATION_ALL}),labelEmail=Ti.UI.createLabel({text:L("email"),top:"3dp",width:"90%",font:{fontSize:Ti.App.fontSize},color:Ti.App.labelSubColor}),textFieldEmail=Ti.UI.createTextField({value:"",hintText:L("mandatory"),backgroundColor:Ti.App.textFieldBackgroundColor,borderColor:Ti.App.textFieldBorderColor,borderRadius:4,paddingLeft:10,height:"50dp",width:"90%",font:{fontSize:Ti.App.fontSize},keyboardType:Ti.UI.KEYBOARD_EMAIL}),labelPhone=Ti.UI.createLabel({text:L("phone"),top:"3dp",width:"90%",font:{fontSize:Ti.App.fontSize},color:Ti.App.labelSubColor}),textFieldPhone=Ti.UI.createTextField({value:"",hintText:L("optional"),backgroundColor:Ti.App.textFieldBackgroundColor,borderColor:Ti.App.textFieldBorderColor,borderRadius:4,paddingLeft:10,height:"50dp",width:"90%",font:{fontSize:Ti.App.fontSize},keyboardType:Ti.UI.KEYBOARD_PHONE_PAD}),labelAddress=Ti.UI.createLabel({text:L("address"),top:"3dp",width:"90%",font:{fontSize:Ti.App.fontSize},color:Ti.App.labelSubColor}),textFieldAddress=Ti.UI.createTextField({value:"",hintText:L("optional"),backgroundColor:Ti.App.textFieldBackgroundColor,borderColor:Ti.App.textFieldBorderColor,borderRadius:4,paddingLeft:10,height:"50dp",width:"90%",font:{fontSize:Ti.App.fontSize},autocapitalization:Ti.UI.TEXT_AUTOCAPITALIZATION_WORDS}),labelAddress2=Ti.UI.createLabel({text:L("address2"),top:"3dp",width:"90%",font:{fontSize:Ti.App.fontSize},color:Ti.App.labelSubColor}),textFieldAddress2=Ti.UI.createTextField({value:"",hintText:L("optional"),backgroundColor:Ti.App.textFieldBackgroundColor,borderColor:Ti.App.textFieldBorderColor,borderRadius:4,paddingLeft:10,height:"50dp",width:"90%",font:{fontSize:Ti.App.fontSize},autocapitalization:Ti.UI.TEXT_AUTOCAPITALIZATION_WORDS}),labelCity=Ti.UI.createLabel({text:L("city"),top:"3dp",width:"90%",font:{fontSize:Ti.App.fontSize},color:Ti.App.labelSubColor}),textFieldCity=Ti.UI.createTextField({value:"Delicias",hintText:L("optional"),backgroundColor:Ti.App.textFieldBackgroundColor,borderColor:Ti.App.textFieldBorderColor,borderRadius:4,paddingLeft:10,height:"50dp",width:"90%",font:{fontSize:Ti.App.fontSize},autocapitalization:Ti.UI.TEXT_AUTOCAPITALIZATION_WORDS}),labelState=Ti.UI.createLabel({text:L("state"),top:"3dp",width:"90%",font:{fontSize:Ti.App.fontSize},color:Ti.App.labelSubColor}),textFieldState=Ti.UI.createTextField({value:"Chihuahua",hintText:L("optional"),backgroundColor:Ti.App.textFieldBackgroundColor,borderColor:Ti.App.textFieldBorderColor,borderRadius:4,paddingLeft:10,height:"50dp",width:"90%",font:{fontSize:Ti.App.fontSize},autocapitalization:Ti.UI.TEXT_AUTOCAPITALIZATION_WORDS}),labelZip=Ti.UI.createLabel({text:L("zip"),top:"3dp",width:"90%",font:{fontSize:Ti.App.fontSize},color:Ti.App.labelSubColor}),textFieldZip=Ti.UI.createTextField({value:"",hintText:L("optional"),backgroundColor:Ti.App.textFieldBackgroundColor,borderColor:Ti.App.textFieldBorderColor,borderRadius:4,paddingLeft:10,height:"50dp",width:"90%",font:{fontSize:Ti.App.fontSize},keyboardType:Ti.UI.KEYBOARD_NUMBER_PAD}),viewButtonMakePaymentContainer=Ti.UI.createView({width:Ti.UI.FILL,height:Ti.UI.SIZE}),indicatorMakePayment=Ti.UI.createActivityIndicator({style:"android"==Ti.Platform.name?Titanium.UI.ActivityIndicatorStyle.BIG:Titanium.UI.iPhone.ActivityIndicatorStyle.BIG,center:{x:"50%"}}),buttonMakePayment=Ti.UI.createButton({title:L("make_payment"),width:"90%",height:"50dp",top:"15dp",bottom:"15dp",borderRadius:4,backgroundColor:Ti.App.buttonColor2,color:Ti.App.buttonTextColor}),viewButtonMakePaymentContainer.add(buttonMakePayment),viewButtonMakePaymentContainer.add(indicatorMakePayment),viewPaymentType.add(textFieldPaymentType),scrollViewPayFineContainer.add(labelPaymentType),scrollViewPayFineContainer.add(viewPaymentType),scrollViewPayFineContainer.add(labelName),scrollViewPayFineContainer.add(textFieldName),scrollViewPayFineContainer.add(labelRFC),scrollViewPayFineContainer.add(textFieldRFC),scrollViewPayFineContainer.add(labelEmail),scrollViewPayFineContainer.add(textFieldEmail),scrollViewPayFineContainer.add(labelPhone),scrollViewPayFineContainer.add(textFieldPhone),scrollViewPayFineContainer.add(labelAddress),scrollViewPayFineContainer.add(textFieldAddress),scrollViewPayFineContainer.add(labelAddress2),scrollViewPayFineContainer.add(textFieldAddress2),scrollViewPayFineContainer.add(labelCity),scrollViewPayFineContainer.add(textFieldCity),scrollViewPayFineContainer.add(labelState),scrollViewPayFineContainer.add(textFieldState),scrollViewPayFineContainer.add(labelZip),scrollViewPayFineContainer.add(textFieldZip),scrollViewPayFineContainer.add(viewButtonMakePaymentContainer),viewBackPayFine.add(imageViewBackIcon),viewBarPayFine.add(viewBackPayFine),viewBarPayFine.add(labePayFineTitle),windowPayFine.add(viewBarPayFine),windowPayFine.add(scrollViewPayFineContainer),function(){var e,t=[];null!=Ti.App.Properties.getObject("userdata").payment_types&&(e=Ti.App.Properties.getObject("userdata").payment_types),e.unshift({id:-1,name:L("please_select"),code:"",description:""});for(var i=0;i<e.length;i++)t[i]=Ti.UI.createPickerRow({value:e[i].id,title:e[i].name});pickerPaymentType.add(t),e=null}(),buttonMakePayment.addEventListener("click",function(n){var l=new Date;l-n.source.clickTime<1500||(n.source.clickTime=l,i(!0),t()?o.makePayment({ticket_id:e.ticket_id,payment_type_id:textFieldPaymentType.selectedId,rfc:textFieldRFC.value.trim(),name:textFieldName.value.trim(),email:textFieldEmail.value.trim(),phone:textFieldPhone.value.trim(),address1:textFieldAddress.value.trim(),address2:textFieldAddress2.value.trim(),city:textFieldCity.value.trim(),state:textFieldState.value.trim(),zip:textFieldZip.value.trim()},function(e){0!=e?(i(!1),windowPayFine.close(),showMessage(L("payment_created")),"android"!==Ti.Platform.name&&(PrintWindow=require("/ui/PrintWindow"),new PrintWindow({ticket_data:e.ticket_info,reprint:!1}))):i(!1)}):i(!1))}),textFieldPaymentType.addEventListener("click",function(e){var t=new Date;t-e.source.clickTime<1e3||(e.source.clickTime=t,PickerModalWindow=require("ui/PickerModalWindow"),new PickerModalWindow({title:L("select_payment_type"),textField:textFieldPaymentType,picker:pickerPaymentType}).open())}),buttonMakePayment.addEventListener("touchstart",function(e){e.source.backgroundColor=Ti.App.buttonPressedColor2}),buttonMakePayment.addEventListener("touchend",function(e){e.source.backgroundColor=Ti.App.buttonColor2}),buttonMakePayment.addEventListener("touchcancel",function(e){e.source.backgroundColor=Ti.App.buttonColor2}),viewBackPayFine.addEventListener("click",function(e){windowPayFine.close()}),viewBackPayFine.addEventListener("touchstart",function(e){viewBackPayFine.backgroundColor=Ti.App.selectedColor}),viewBackPayFine.addEventListener("touchend",function(e){viewBackPayFine.backgroundColor="transparent"}),viewBackPayFine.addEventListener("touchcancel",function(e){viewBackPayFine.backgroundColor="transparent"}),windowPayFine}module.exports=PayFineWindow;