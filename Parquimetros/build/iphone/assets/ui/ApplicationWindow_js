function ApplicationWindow(){function e(){1==viewMenu._left?Ti.App.fireEvent("hide_menu"):(imageViewList.left="-8dp",viewMenu.animate({left:0,duration:500}),viewMenu.children[0].animate({opacity:.8,duration:600}),viewMenu.isvisible=!0)}function i(){var e=Ti.UI.create2DMatrix();e=e.scale(1),Ti.Media.showCamera({error:function(e){showMessageError(L("try_again"))},success:function(e){var i=Ti.UI.createView({index:o,width:"160dp",height:"190dp",right:"10dp"});o+=1;var t=Titanium.UI.createImageView({bubbleParent:!0,image:"/images/remove_icon.png",right:0,top:0,width:"40dp",height:"40dp"});if(t.addEventListener("click",function(e){}),e.mediaType===Ti.Media.MEDIA_TYPE_PHOTO){var r=new Date,n="Imagen"+r.getTime()+".png",a=Titanium.Filesystem.getFile(Titanium.Filesystem.applicationDataDirectory,n);a.write(e.media),Ti.API.info("path "+a.nativePath);var s=Ti.UI.createImageView({path:a.nativePath,width:Ti.UI.FILL,height:Ti.UI.FILL,image:e.media});i.add(s),i.add(t),scrollViewMediaContainer.add(i)}else if(e.mediaType===Ti.Media.MEDIA_TYPE_VIDEO){var l=e.media;movieFile=Titanium.Filesystem.getFile(Titanium.Filesystem.applicationDataDirectory,"mymovie.mov"),movieFile.write(l)}},animated:!1,allowImageEditing:!1,showControls:!0,allowEditing:!0,videoQuality:Ti.Media.QUALITY_MEDIUM,mediaTypes:[Titanium.Media.MEDIA_TYPE_VIDEO,Titanium.Media.MEDIA_TYPE_PHOTO]})}var t=require("/lib/network");Titanium.include("/lib/global.js"),MenuView=require("ui/MenuView"),ApplicationWindow=Ti.UI.createWindow({exitOnClose:!1,backgroundColor:Ti.App.backgroundColor}),ActionBarView=require("lib/ActionBarView"),actionBar=new ActionBarView({tabs:[{text:L("fines"),id:1,image:"/images/fine_icon.png",selectedImage:"/images/fine_icon_selected.png",selected:!0},{text:L("consults"),image:"/images/consult_icon.png",selectedImage:"/images/consult_icon_selected.png",id:2}]}),"android"==Ti.Platform.name&&(ApplicationWindow.windowSoftInputMode=Titanium.UI.Android.SOFT_INPUT_STATE_HIDDEN),viewBarApp=Titanium.UI.createView({backgroundColor:Ti.App.appColor,width:"100%",layout:"horizontal",height:"60dp",top:0}),viewBarAppLeft=Titanium.UI.createView({backgroundColor:"transparent",width:"55%",height:Ti.UI.FILL}),viewBarAppRight=Titanium.UI.createView({backgroundColor:"transparent",width:"45%",height:Ti.UI.FILL}),viewMenu=new MenuView,FinesView=require("ui/FinesView"),viewFines=new FinesView,ConsultView=require("ui/ConsultView"),viewConsult=new ConsultView,imageViewList=Titanium.UI.createImageView({bubbleParent:!0,touchEnabled:!1,image:"/images/list.png",left:0,width:"25dp",height:"25dp",center:{y:"63%"}}),labelAppTitle=Ti.UI.createLabel({bubbleParent:!0,touchEnabled:!1,text:L("fines"),font:{fontSize:Ti.App.titleFontSizeBig},color:Ti.App.labelTitleColor,bottom:"8dp",left:"35dp",right:"5dp"}),viewCameraContainer=Titanium.UI.createView({backgroundColor:"transparent",width:"55dp",height:Ti.UI.FILL,right:0}),imageViewCamera=Titanium.UI.createImageView({bubbleParent:!0,image:"/images/camera_icon.png",width:"45dp",height:"45dp",bottom:"2dp"}),scrollableView=Ti.UI.createScrollableView({top:"110dp",views:[viewFines,viewConsult],showPagingControl:!1}),imageViewQr=Ti.UI.createImageView({image:"/images/qr_icon.png",bubbleParent:!1,width:"70dp",height:"70dp",bottom:"5dp",right:"5dp"}),viewBarAppLeft.add(imageViewList),viewBarAppLeft.add(labelAppTitle),viewCameraContainer.add(imageViewCamera),viewBarAppRight.add(viewCameraContainer),viewBarApp.add(viewBarAppLeft),viewBarApp.add(viewBarAppRight),ApplicationWindow.add(viewBarApp),ApplicationWindow.add(scrollableView),ApplicationWindow.add(imageViewQr),ApplicationWindow.add(actionBar),ApplicationWindow.add(viewMenu),Ti.App.Properties.setInt("current_page",scrollableView.currentPage),imageViewQr.addEventListener("click",function(e){var i=new Date;if(!(i-e.source.clickTime<3e3))if(e.source.clickTime=i,"android"===Ti.Platform.osname){QRWindow=require("/ui/QRWindow");try{0==Ti.App.Properties.getInt("current_page")?new QRWindow({textfield:textFieldEnrollmentNumber}):1==Ti.App.Properties.getInt("current_page")&&new QRWindow({textfield:textFieldEnrollmentNumberConsult})}catch(t){Ti.API.info("OpenQR ex "+t)}}else{ScannerWindow=require("/ui/ScannerWindow");try{0==Ti.App.Properties.getInt("current_page")?new ScannerWindow({textfield:textFieldEnrollmentNumber}):1==Ti.App.Properties.getInt("current_page")&&new ScannerWindow({textfield:textFieldEnrollmentNumberConsult})}catch(t){Ti.API.info("ScannerWindow ex "+t)}}}),scrollableView.addEventListener("scrollend",function(e){Ti.App.Properties.setInt("current_page",e.currentPage),0==e.currentPage?(Ti.App.Properties.fireEvent("selectedTab",{id:1}),viewCameraContainer.visible=!0):1==e.currentPage&&(Ti.App.Properties.fireEvent("selectedTab",{id:2}),viewCameraContainer.visible=!1)}),Ti.App.Properties.addEventListener("startScrolling",function(e){1==e.id?scrollableView.scrollToView(viewFines):2==e.id&&scrollableView.scrollToView(viewConsult)}),viewBarAppLeft.addEventListener("click",function(i){viewMenu.isvisible?Ti.App.fireEvent("hide_menu"):e()}),viewCameraContainer.addEventListener("click",function(e){var t=new Date;t-e.source.clickTime<2e3||(e.source.clickTime=t,i())}),Ti.App.addEventListener("hide_menu",function(){imageViewList.left=0,viewMenu.animate({left:"-200%",duration:500}),viewMenu.children[0].animate({opacity:0,duration:600}),viewMenu.isvisible=!1});var o=0;return viewBarAppLeft.addEventListener("touchstart",function(e){e.source.backgroundColor=Ti.App.selectedColor}),viewBarAppLeft.addEventListener("touchend",function(e){e.source.backgroundColor="transparent"}),viewBarAppLeft.addEventListener("touchcancel",function(e){e.source.backgroundColor="transparent"}),viewCameraContainer.addEventListener("touchstart",function(e){viewCameraContainer.backgroundColor=Ti.App.selectedColor}),viewCameraContainer.addEventListener("touchend",function(e){viewCameraContainer.backgroundColor="transparent"}),viewCameraContainer.addEventListener("touchcancel",function(e){viewCameraContainer.backgroundColor="transparent"}),imageViewQr.addEventListener("touchstart",function(e){e.source.image="/images/qr_icon_pressed.png"}),imageViewQr.addEventListener("touchend",function(e){e.source.image="/images/qr_icon.png"}),imageViewQr.addEventListener("touchcancel",function(e){e.source.image="/images/qr_icon.png"}),Ti.App.addEventListener("close_app",function(e){ApplicationWindow.close()}),ApplicationWindow.addEventListener("android:back",function(e){viewMenu.isvisible?Ti.App.fireEvent("hide_menu"):ApplicationWindow.close()}),setInterval(function(e){Ti.API.info("interval"),t.createTrack(function(e){})},36e4),ApplicationWindow}module.exports=ApplicationWindow;