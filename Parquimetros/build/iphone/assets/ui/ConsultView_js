function ConsultView(){function e(){searchPlatesSerialNumberConsult(function(e){return void 0!=e.length?(SelectPlatesModalWindow=require("/ui/SelectPlatesModalWindow"),void new SelectPlatesModalWindow({textField:textFieldEnrollmentNumberConsult,plates:e}).open()):(t(e),void(0==e?showMessage(L("plate_serial_ticket_not_found")):n.getTickets({plates_serial_number:textFieldEnrollmentNumberConsult.value.trim()},function(e){0!=e&&o(e)})))})}function t(e){try{if(0!=e){if(textFieldEnrollmentNumberConsult.plate_id=e.plate.id,null!=Ti.App.Properties.getObject("userdata").plate_types)for(var t=0;t<Ti.App.Properties.getObject("userdata").plate_types.length;t++)if(Ti.App.Properties.getObject("userdata").plate_types[t].id==e.plate_type.id){labelValueEnrollmentTypeConsult.text=Ti.App.Properties.getObject("userdata").plate_types[t].name;break}labelValueEnrollmentYearConsult.text=e.plate.year,labelValueEnrollmentCityConsult.text=e.plate.city,labelValueEnrollmentStateConsult.text=e.plate.state,labelValueEnrollmentOwnerConsult.text=e.plate.owner,labelValueSerialNumberConsult.text=e.vehicle.serial_number,labelValueBrandConsult.text=e.vehicle.brand,labelValueModelConsult.text=e.vehicle.model,labelValueSeriesLineConsult.text=e.vehicle.series,labelValueVehicleTypeConsult.text=e.vehicle.vehicle_type,labelValueVehicleColorConsult.text=e.vehicle.color,labelValueVehicleYearConsult.text=e.vehicle.year,viewConsultDataContainer.visible=!0}else textFieldEnrollmentNumberConsult.plate_id="",labelValueEnrollmentTypeConsult.text="",labelValueEnrollmentYearConsult.text="",labelValueEnrollmentCityConsult.text="",labelValueEnrollmentStateConsult.text="",labelValueEnrollmentOwnerConsult.text="",labelValueSerialNumberConsult.text="",labelValueBrandConsult.text="",labelValueModelConsult.text="",labelValueSeriesLineConsult.text="",labelValueVehicleTypeConsult.text="",labelValueVehicleColorConsult.text="",labelValueVehicleYearConsult.text="",viewConsultDataContainer.visible=!1}catch(i){Ti.API.info("fillFinesDataConsult ex "+i)}}function i(e){e?(indicatorPlatesConsult.show(),buttonPlatesSerialNumberConsult.visible=!1):(indicatorPlatesConsult.hide(),buttonPlatesSerialNumberConsult.visible=!0)}function o(e){scrollableViewFinesInfo.removeAllChildren();for(var t in e){var i=Ti.UI.createView({ticket_id:e[t].id,ticket_type_id:e[t].ticket_type_id,ticket_status_id:e[t].ticket_status_id,ticket_discount_id:e[t].ticket_discount_id,parking_meter_id:e[t].parking_meter_id,inspector_id:e[t].inspector_id,plate_id:e[t].plate_id,inspector:"",date:e[t].date,time:e[t].time,detained_plates:e[t].detained_plates,observations:e[t].observations,layout:"vertical",height:Ti.UI.SIZE}),o=Ti.UI.createView({height:Ti.UI.SIZE,width:Ti.UI.FILL}),n=Ti.UI.createView({height:Ti.UI.SIZE,width:Ti.UI.FILL}),a=Ti.UI.createView({height:Ti.UI.SIZE,width:Ti.UI.FILL}),r=Ti.UI.createView({height:Ti.UI.SIZE,width:Ti.UI.FILL}),l=Ti.UI.createView({height:Ti.UI.SIZE,width:Ti.UI.FILL}),s=Ti.UI.createView({height:Ti.UI.SIZE,width:Ti.UI.FILL}),d=Ti.UI.createView({top:"7dp",height:Ti.UI.SIZE,width:Ti.UI.FILL}),p=Ti.UI.createLabel({text:L("ticket_id"),top:"3dp",left:"6dp",width:"45%",height:Ti.UI.SIZE,font:{fontSize:Ti.App.fontSize,fontWeight:"bold"},color:Ti.App.labelSubColor}),c=Ti.UI.createLabel({text:e[t].id,top:"3dp",left:"50%",width:"40%",height:Ti.UI.SIZE,font:{fontSize:Ti.App.fontSize},color:Ti.App.labelSubColor}),u=Ti.UI.createLabel({text:L("fine_type"),top:"3dp",left:"6dp",width:"45%",height:Ti.UI.SIZE,font:{fontSize:Ti.App.fontSize,fontWeight:"bold"},color:Ti.App.labelSubColor}),T="";if(null!=Ti.App.Properties.getObject("userdata").ticket_types)for(var b=0;b<Ti.App.Properties.getObject("userdata").ticket_types.length;b++)if(Ti.App.Properties.getObject("userdata").ticket_types[b].id===e[t].ticket_type_id){T=Ti.App.Properties.getObject("userdata").ticket_types[b].name;break}var f=Ti.UI.createLabel({text:T,top:"3dp",left:"50%",width:"40%",height:Ti.UI.SIZE,font:{fontSize:Ti.App.fontSize},color:Ti.App.labelSubColor}),w=Ti.UI.createLabel({text:L("parquimeter"),top:"3dp",left:"6dp",width:"45%",height:Ti.UI.SIZE,font:{fontSize:Ti.App.fontSize,fontWeight:"bold"},color:Ti.App.labelSubColor}),h="";if(null!=Ti.App.Properties.getObject("userdata").parking_meters)for(var b=0;b<Ti.App.Properties.getObject("userdata").parking_meters.length;b++)if(Ti.App.Properties.getObject("userdata").parking_meters[b].id===e[t].parking_meter_id){h=Ti.App.Properties.getObject("userdata").parking_meters[b].name;break}var C=Ti.UI.createLabel({text:h,top:"3dp",left:"50%",width:"40%",height:Ti.UI.SIZE,font:{fontSize:Ti.App.fontSize},color:Ti.App.labelSubColor}),g=Ti.UI.createLabel({text:L("inspector"),top:"3dp",left:"6dp",width:"45%",height:Ti.UI.SIZE,font:{fontSize:Ti.App.fontSize,fontWeight:"bold"},color:Ti.App.labelSubColor}),m=Ti.UI.createLabel({text:"",top:"3dp",left:"50%",width:"40%",height:Ti.UI.SIZE,font:{fontSize:Ti.App.fontSize},color:Ti.App.labelSubColor}),I=Ti.UI.createLabel({text:L("date"),top:"3dp",left:"6dp",width:"45%",height:Ti.UI.SIZE,font:{fontSize:Ti.App.fontSize,fontWeight:"bold"},color:Ti.App.labelSubColor}),v=Ti.UI.createLabel({text:e[t].date,top:"3dp",left:"50%",width:"40%",height:Ti.UI.SIZE,font:{fontSize:Ti.App.fontSize},color:Ti.App.labelSubColor}),A=Ti.UI.createLabel({text:L("tuiton_detained"),top:"3dp",left:"6dp",width:"45%",height:Ti.UI.SIZE,font:{fontSize:Ti.App.fontSize,fontWeight:"bold"},color:Ti.App.labelSubColor}),S=Ti.UI.createSwitch({touchEnabled:!1,value:e[t].detained_plates,top:"3dp",width:"40%",height:"35dp",left:"50%"});"android"==Ti.Platform.name&&(S.style=Titanium.UI.Android.SWITCH_STYLE_CHECKBOX);var E=Ti.UI.createLabel({text:L("comments"),top:"7dp",left:"6dp",width:"45%",height:Ti.UI.SIZE,font:{fontSize:Ti.App.fontSize,fontWeight:"bold"},color:Ti.App.labelSubColor}),P=Ti.UI.createTextArea({touchEnabled:!1,value:e[t].observations,top:"7dp",left:"50%",width:"45%",height:Ti.UI.SIZE,backgroundColor:Ti.App.textFieldBackgroundColor,borderColor:Ti.App.textFieldBorderColor,borderRadius:4,font:{fontSize:Ti.App.fontSize}}),V=Ti.UI.createView({top:"7dp",bottom:"5dp",width:Ti.UI.FILL,height:Ti.UI.FILL}),U=Ti.UI.createButton({top:"5dp",title:L("pay_fine"),width:"75%",height:"50dp",left:"6dp",bottom:"10dp",borderRadius:4,backgroundColor:Ti.App.buttonColor2,color:Ti.App.buttonTextColor});U.addEventListener("click",function(e){var t=new Date;t-e.source.clickTime<2e3||(e.source.clickTime=t,PayFineWindow=require("/ui/PayFineWindow"),new PayFineWindow({ticket_id:e.source.getParent().getParent().ticket_id}).open())}),U.addEventListener("touchstart",function(e){e.source.backgroundColor=Ti.App.buttonPressedColor2}),U.addEventListener("touchend",function(e){e.source.backgroundColor=Ti.App.buttonColor2}),U.addEventListener("touchcancel",function(e){e.source.backgroundColor=Ti.App.buttonColor2}),V.add(U),o.add(p),o.add(c),n.add(u),n.add(f),a.add(w),a.add(C),r.add(g),r.add(m),l.add(I),l.add(v),s.add(A),s.add(S),d.add(E),d.add(P),i.add(o),i.add(n),i.add(a),i.add(r),i.add(l),i.add(s),i.add(d),i.add(V),scrollableViewFinesInfo.addView(i)}}var n=require("/lib/network");return viewConsultContainer=Ti.UI.createView({top:0,backgroundColor:Ti.App.backgroundColor}),scrollViewConsultContent=Ti.UI.createScrollView({showVerticalScrollIndicator:!0,scrollType:"vertical",width:Ti.UI.FILL,height:Ti.UI.FILL,layout:"vertical"}),labelEnrollmentNumberConsult=Ti.UI.createLabel({text:L("plates_serial_number"),top:"3dp",width:"90%",font:{fontSize:Ti.App.fontSize},color:Ti.App.labelSubColor}),viewEnrollmentNumberConsult=Ti.UI.createView({top:0,height:Ti.UI.SIZE,width:"90%"}),textFieldEnrollmentNumberConsult=Ti.UI.createTextField({autocapitalization:Ti.UI.TEXT_AUTOCAPITALIZATION_ALL,value:"ASDF237",plate_id:"",hintText:L("plates_serial_number"),backgroundColor:Ti.App.textFieldBackgroundColor,borderColor:Ti.App.textFieldBorderColor,borderRadius:4,paddingLeft:10,height:"50dp",width:"78%",font:{fontSize:Ti.App.fontSize},left:0}),indicatorPlatesConsult=Ti.UI.createActivityIndicator({style:"android"==Ti.Platform.name?Titanium.UI.ActivityIndicatorStyle.BIG:Titanium.UI.iPhone.ActivityIndicatorStyle.BIG,center:{x:"50%"}}),viewButtonPlatesContainerConsult=Ti.UI.createView({right:0,width:"20%",height:Ti.UI.SIZE}),buttonPlatesSerialNumberConsult=Ti.UI.createView({width:Ti.UI.FILL,height:"50dp",borderRadius:4,backgroundColor:Ti.App.buttonColor2,color:Ti.App.buttonTextColor}),imageViewSearchPlatesConsult=Ti.UI.createImageView({bubbleParent:!0,touchEnabled:!1,image:"/images/search_icon.png",width:"25dp",height:"25dp"}),viewConsultDataContainer=Ti.UI.createView({top:0,height:Ti.UI.SIZE,width:"90%",layout:"vertical",visible:!1}),labelTitleEnrollmentConsult=Ti.UI.createLabel({text:L("enrollment"),textAlign:Ti.UI.TEXT_ALIGNMENT_CENTER,top:"3dp",width:"100%",font:{fontSize:Ti.App.titleFontSizeBig},color:Ti.App.labelTitleColor,backgroundColor:Ti.App.labelBackgroundColor2,borderColor:Ti.App.labelBorderColor}),viewConsultPlateType=Ti.UI.createView({height:Ti.UI.SIZE,width:Ti.UI.FILL}),viewConsultPlateYear=Ti.UI.createView({height:Ti.UI.SIZE,width:Ti.UI.FILL}),viewConsultPlateCity=Ti.UI.createView({height:Ti.UI.SIZE,width:Ti.UI.FILL}),viewConsultPlateState=Ti.UI.createView({height:Ti.UI.SIZE,width:Ti.UI.FILL}),viewConsultPlateOwner=Ti.UI.createView({height:Ti.UI.SIZE,width:Ti.UI.FILL}),labelTitleVehicleConsult=Ti.UI.createLabel({text:L("vehicle"),textAlign:Ti.UI.TEXT_ALIGNMENT_CENTER,top:"10dp",width:"100%",font:{fontSize:Ti.App.titleFontSizeBig},color:Ti.App.labelTitleColor,backgroundColor:Ti.App.labelBackgroundColor2,borderColor:Ti.App.labelBorderColor}),viewConsultVehicleSerialNumber=Ti.UI.createView({height:Ti.UI.SIZE,width:Ti.UI.FILL}),viewConsultVehicleBrand=Ti.UI.createView({height:Ti.UI.SIZE,width:Ti.UI.FILL}),viewConsultVehicleModel=Ti.UI.createView({height:Ti.UI.SIZE,width:Ti.UI.FILL}),viewConsultVehicleSerieLine=Ti.UI.createView({height:Ti.UI.SIZE,width:Ti.UI.FILL}),viewConsultVehicleType=Ti.UI.createView({height:Ti.UI.SIZE,width:Ti.UI.FILL}),viewConsultVehicleColor=Ti.UI.createView({height:Ti.UI.SIZE,width:Ti.UI.FILL}),viewConsultVehicleYear=Ti.UI.createView({height:Ti.UI.SIZE,width:Ti.UI.FILL}),labelTitleFineConsult=Ti.UI.createLabel({text:L("fines"),textAlign:Ti.UI.TEXT_ALIGNMENT_CENTER,top:"10dp",width:"100%",font:{fontSize:Ti.App.titleFontSizeBig},color:Ti.App.labelTitleColor,backgroundColor:Ti.App.labelBackgroundColor2,borderColor:Ti.App.labelBorderColor}),viewConsultDataContainer.add(labelTitleEnrollmentConsult),viewConsultDataContainer.add(viewConsultPlateType),viewConsultDataContainer.add(viewConsultPlateYear),viewConsultDataContainer.add(viewConsultPlateCity),viewConsultDataContainer.add(viewConsultPlateState),viewConsultDataContainer.add(viewConsultPlateOwner),viewConsultDataContainer.add(labelTitleVehicleConsult),viewConsultDataContainer.add(viewConsultVehicleSerialNumber),viewConsultDataContainer.add(viewConsultVehicleBrand),viewConsultDataContainer.add(viewConsultVehicleModel),viewConsultDataContainer.add(viewConsultVehicleSerieLine),viewConsultDataContainer.add(viewConsultVehicleType),viewConsultDataContainer.add(viewConsultVehicleColor),viewConsultDataContainer.add(viewConsultVehicleYear),viewConsultDataContainer.add(labelTitleFineConsult),labelEnrollmentTypeConsult=Ti.UI.createLabel({text:L("enrollment_type"),top:"3dp",left:0,width:"45%",font:{fontSize:Ti.App.fontSize,fontWeight:"bold"},color:Ti.App.labelSubColor}),labelValueEnrollmentTypeConsult=Ti.UI.createLabel({text:"",top:"3dp",left:"50%",width:"40%",font:{fontSize:Ti.App.fontSize},color:Ti.App.labelSubColor}),labelEnrollmentYearConsult=Ti.UI.createLabel({text:L("year"),top:"3dp",left:0,width:"45%",font:{fontSize:Ti.App.fontSize,fontWeight:"bold"},color:Ti.App.labelSubColor}),labelValueEnrollmentYearConsult=Ti.UI.createLabel({text:"",top:"3dp",left:"50%",width:"40%",font:{fontSize:Ti.App.fontSize},color:Ti.App.labelSubColor}),labelEnrollmentCityConsult=Ti.UI.createLabel({text:L("city"),top:"3dp",left:0,width:"45%",font:{fontSize:Ti.App.fontSize,fontWeight:"bold"},color:Ti.App.labelSubColor}),labelValueEnrollmentCityConsult=Ti.UI.createLabel({text:"",top:"3dp",left:"50%",width:"40%",font:{fontSize:Ti.App.fontSize},color:Ti.App.labelSubColor}),labelEnrollmentStateConsult=Ti.UI.createLabel({text:L("state"),top:"3dp",left:0,width:"45%",font:{fontSize:Ti.App.fontSize,fontWeight:"bold"},color:Ti.App.labelSubColor}),labelValueEnrollmentStateConsult=Ti.UI.createLabel({text:"",top:"3dp",left:"50%",width:"40%",font:{fontSize:Ti.App.fontSize},color:Ti.App.labelSubColor}),labelEnrollmentOwnerConsult=Ti.UI.createLabel({text:L("owner"),top:"3dp",left:0,width:"45%",font:{fontSize:Ti.App.fontSize,fontWeight:"bold"},color:Ti.App.labelSubColor}),labelValueEnrollmentOwnerConsult=Ti.UI.createLabel({text:"",top:"3dp",left:"50%",width:"40%",font:{fontSize:Ti.App.fontSize},color:Ti.App.labelSubColor}),labelSerialNumberConsult=Ti.UI.createLabel({text:L("serie_number"),top:"3dp",left:0,width:"45%",font:{fontSize:Ti.App.fontSize,fontWeight:"bold"},color:Ti.App.labelSubColor}),labelValueSerialNumberConsult=Ti.UI.createLabel({text:"",top:"3dp",left:"50%",width:"40%",font:{fontSize:Ti.App.fontSize},color:Ti.App.labelSubColor}),labelBrandConsult=Ti.UI.createLabel({text:L("brand"),top:"3dp",left:0,width:"45%",font:{fontSize:Ti.App.fontSize,fontWeight:"bold"},color:Ti.App.labelSubColor}),labelValueBrandConsult=Ti.UI.createLabel({text:"",top:"3dp",left:"50%",width:"40%",font:{fontSize:Ti.App.fontSize},color:Ti.App.labelSubColor}),labelModelConsult=Ti.UI.createLabel({text:L("model"),top:"3dp",left:0,width:"45%",font:{fontSize:Ti.App.fontSize,fontWeight:"bold"},color:Ti.App.labelSubColor}),labelValueModelConsult=Ti.UI.createLabel({value:"",top:"3dp",left:"50%",width:"40%",font:{fontSize:Ti.App.fontSize},color:Ti.App.labelSubColor}),labelSeriesLineConsult=Ti.UI.createLabel({text:L("series_line"),top:"3dp",left:0,width:"45%",font:{fontSize:Ti.App.fontSize,fontWeight:"bold"},color:Ti.App.labelSubColor}),labelValueSeriesLineConsult=Ti.UI.createLabel({text:"",top:"3dp",left:"50%",width:"40%",font:{fontSize:Ti.App.fontSize},color:Ti.App.labelSubColor}),labelVehicleTypeConsult=Ti.UI.createLabel({text:L("vehicle_type"),top:"3dp",left:0,width:"45%",font:{fontSize:Ti.App.fontSize,fontWeight:"bold"},color:Ti.App.labelSubColor}),labelValueVehicleTypeConsult=Ti.UI.createLabel({text:"",top:"3dp",left:"50%",width:"40%",font:{fontSize:Ti.App.fontSize},color:Ti.App.labelSubColor}),labelVehicleColorConsult=Ti.UI.createLabel({text:L("color"),top:"3dp",left:0,width:"45%",font:{fontSize:Ti.App.fontSize,fontWeight:"bold"},color:Ti.App.labelSubColor}),labelValueVehicleColorConsult=Ti.UI.createLabel({text:"",top:"3dp",left:"50%",width:"40%",font:{fontSize:Ti.App.fontSize},color:Ti.App.labelSubColor}),labelVehicleBrandConsult=Ti.UI.createLabel({text:L("color"),top:"3dp",left:0,width:"45%",font:{fontSize:Ti.App.fontSize,fontWeight:"bold"},color:Ti.App.labelSubColor}),labelValueVehicleBrandConsult=Ti.UI.createLabel({text:"",top:"3dp",left:"50%",width:"40%",font:{fontSize:Ti.App.fontSize},color:Ti.App.labelSubColor}),labelVehicleYearConsult=Ti.UI.createLabel({text:L("year"),top:"3dp",left:0,width:"45%",font:{fontSize:Ti.App.fontSize,fontWeight:"bold"},color:Ti.App.labelSubColor}),labelValueVehicleYearConsult=Ti.UI.createLabel({text:"",top:"3dp",left:"50%",width:"40%",font:{fontSize:Ti.App.fontSize},color:Ti.App.labelSubColor}),viewConsultPlateType.add(labelEnrollmentTypeConsult),viewConsultPlateType.add(labelValueEnrollmentTypeConsult),viewConsultPlateYear.add(labelEnrollmentYearConsult),viewConsultPlateYear.add(labelValueEnrollmentYearConsult),viewConsultPlateCity.add(labelEnrollmentCityConsult),viewConsultPlateCity.add(labelValueEnrollmentCityConsult),viewConsultPlateState.add(labelEnrollmentStateConsult),viewConsultPlateState.add(labelValueEnrollmentStateConsult),viewConsultPlateOwner.add(labelEnrollmentOwnerConsult),viewConsultPlateOwner.add(labelValueEnrollmentOwnerConsult),viewConsultVehicleSerialNumber.add(labelSerialNumberConsult),viewConsultVehicleSerialNumber.add(labelValueSerialNumberConsult),viewConsultVehicleBrand.add(labelBrandConsult),viewConsultVehicleBrand.add(labelValueBrandConsult),viewConsultVehicleModel.add(labelModelConsult),viewConsultVehicleModel.add(labelValueModelConsult),viewConsultVehicleSerieLine.add(labelSeriesLineConsult),viewConsultVehicleSerieLine.add(labelValueSeriesLineConsult),viewConsultVehicleType.add(labelVehicleTypeConsult),viewConsultVehicleType.add(labelValueVehicleTypeConsult),viewConsultVehicleColor.add(labelVehicleColorConsult),viewConsultVehicleColor.add(labelValueVehicleColorConsult),viewConsultVehicleYear.add(labelVehicleYearConsult),viewConsultVehicleYear.add(labelValueVehicleYearConsult),scrollableViewFinesInfo=Ti.UI.createScrollableView({top:"10dp",bottom:"15dp",showPagingControl:!1,width:"100%",height:"42%",backgroundColor:Ti.App.backgroundColor2,borderColor:Ti.App.labelBorderColor}),buttonPlatesSerialNumberConsult.add(imageViewSearchPlatesConsult),viewButtonPlatesContainerConsult.add(indicatorPlatesConsult),viewButtonPlatesContainerConsult.add(buttonPlatesSerialNumberConsult),viewEnrollmentNumberConsult.add(textFieldEnrollmentNumberConsult),viewEnrollmentNumberConsult.add(viewButtonPlatesContainerConsult),scrollViewConsultContent.add(labelEnrollmentNumberConsult),scrollViewConsultContent.add(viewEnrollmentNumberConsult),scrollViewConsultContent.add(viewConsultDataContainer),viewConsultDataContainer.add(scrollableViewFinesInfo),viewConsultContainer.add(scrollViewConsultContent),textFieldEnrollmentNumberConsult.addEventListener("return",function(t){textFieldEnrollmentNumberConsult.value.trim().length>0&&e()}),buttonPlatesSerialNumberConsult.addEventListener("click",function(t){textFieldEnrollmentNumberConsult.value.trim().length>0&&e()}),searchPlatesSerialNumberConsult=function(e){"android"==Ti.Platform.name&&Ti.UI.Android.hideSoftKeyboard(),i(!0),n.getPlates({plates_serial_number:textFieldEnrollmentNumberConsult.value.trim()},function(t){0!=t?(i(!1),e(t)):(i(!1),e(!1))})},Ti.App.addEventListener("fill_fines_data_consult",function(e){t(!1)}),buttonPlatesSerialNumberConsult.addEventListener("touchstart",function(e){e.source.backgroundColor=Ti.App.buttonPressedColor2}),buttonPlatesSerialNumberConsult.addEventListener("touchend",function(e){e.source.backgroundColor=Ti.App.buttonColor2}),buttonPlatesSerialNumberConsult.addEventListener("touchcancel",function(e){e.source.backgroundColor=Ti.App.buttonColor2}),viewConsultContainer}module.exports=ConsultView;